---
import Logo from '../components/Logo.astro';

const navItems = [
    { linkText: 'Home', href: '/' },
    { linkText: 'Products', href: '/products' },
    { linkText: 'Vision', href: '/#vision' },
    { linkText: 'Mission', href: '/#mission' },
    { linkText: 'Contact', href: '/#contact' }
];

const currentPath = Astro.url.pathname;
---

<nav class="sticky top-0 z-50 bg-eco-green-800/95 backdrop-blur-sm shadow-lg animate-slide-down">
    <div class="flex flex-wrap items-center justify-between gap-4 py-4 px-6 max-w-7xl mx-auto">
        <a href="/" class="flex items-center gap-3 hover:opacity-80 transition-opacity">
            <Logo />
            <div class="flex flex-col">
                <span class="text-xl sm:text-2xl font-bold text-white">Sairaj Globalex</span>
                <span class="text-xs sm:text-sm text-natural-beige-200">Eco-Friendly Solutions</span>
            </div>
        </a>
        
        <!-- Mobile Menu Button -->
        <button 
            id="mobile-menu-button" 
            class="lg:hidden text-white p-2 hover:bg-eco-green-700 rounded-lg transition-colors"
            aria-label="Toggle menu"
        >
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
        </button>

        <!-- Desktop Navigation -->
        <ul class="hidden lg:flex flex-wrap gap-x-2 gap-y-1">
            {navItems.map((item) => (
                <li>
                    <a 
                        href={item.href} 
                        class={`inline-block px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:bg-eco-green-700 hover:scale-105 ${
                            currentPath === item.href || (item.href !== '/' && currentPath.startsWith(item.href))
                                ? 'bg-eco-green-700 text-white'
                                : 'text-natural-beige-100 hover:text-white'
                        }`}
                    >
                        {item.linkText}
                    </a>
                </li>
            ))}
        </ul>
    </div>

    <!-- Mobile Navigation -->
    <div id="mobile-menu" class="hidden lg:hidden bg-eco-green-900 border-t border-eco-green-700">
        <ul class="flex flex-col py-4 px-6 gap-2">
            {navItems.map((item) => (
                <li>
                    <a 
                        href={item.href} 
                        class={`block px-4 py-3 rounded-lg font-medium transition-all duration-300 hover:bg-eco-green-700 ${
                            currentPath === item.href || (item.href !== '/' && currentPath.startsWith(item.href))
                                ? 'bg-eco-green-700 text-white'
                                : 'text-natural-beige-100 hover:text-white'
                        }`}
                    >
                        {item.linkText}
                    </a>
                </li>
            ))}
        </ul>
    </div>
</nav>

<script>
    // Mobile menu toggle
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');

    mobileMenuButton?.addEventListener('click', () => {
        mobileMenu?.classList.toggle('hidden');
    });

    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="/#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            const href = this.getAttribute('href');
            if (href && href.includes('#')) {
                const targetId = href.split('#')[1];
                const targetElement = document.getElementById(targetId);
                
                if (targetElement) {
                    e.preventDefault();
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                    
                    // Close mobile menu if open
                    mobileMenu?.classList.add('hidden');
                }
            }
        });
    });

    // Close mobile menu when clicking outside
    document.addEventListener('click', (e) => {
        const target = e.target as HTMLElement;
        if (!target.closest('nav') && !mobileMenu?.classList.contains('hidden')) {
            mobileMenu?.classList.add('hidden');
        }
    });
</script>

<style>
    nav {
        transition: all 0.3s ease;
    }
</style>
